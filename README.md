# Structurizr — Документация архитектуры

## Курс: Архитектура программных систем

## Вариант 20: Система управления медицинскими записями

### Описание

Система предназначена для управления медицинскими записями пациентов, включая регистрацию пользователей, ведение медицинских карт и интеграцию с внешними сервисами.

### Структура репозитория

- **workspace.dsl** — главный файл с моделью и представлениями C4 (C1, C2, Dynamic)
- **README.md** — этот файл с описанием варианта

### Функциональные требования (API)

| № | Endpoint | Метод | Описание |
|---|----------|-------|----------|
| 1 | /api/users | POST | Создание нового пользователя |
| 2 | /api/users/search | GET | Поиск пользователя по логину |
| 3 | /api/users/name | GET | Поиск по маске имя и фамилия |
| 4 | /api/patients | POST | Регистрация пациента |
| 5 | /api/patients/search | GET | Поиск пациента по ФИО |
| 6 | /api/records | POST | Создание медицинской записи |
| 7 | /api/patients/{id}/records | PUT | Добавление записи к пациенту |
| 8 | /api/patients/{id}/records | GET | История записей пациента |
| 9 | /api/records/{code} | GET | Получение записи по коду |

### Роли пользователей

| Роль | Описание |
|------|----------|
| Пациент | Просматривает свои записи, регистрируется |
| Врач | Создаёт и просматривает медицинские записи |
| Администратор | Управляет пользователями и справочниками |
| Лаборант | Добавляет результаты анализов |

### Внешние системы

| Система | Назначение | Протокол |
|---------|------------|----------|
| Email Service | Уведомления по почте | SMTP:25 |
| SMS Gateway | SMS-уведомления | HTTPS:443 |
| Insurance System | Проверка страховки | HTTPS:443 |
| Laboratory System | Интеграция с лабораториями | HTTPS:443 |

### Технологии

| Компонент | Технология |
|-----------|------------|
| Frontend | React, JavaScript |
| Backend | Spring Boot, Java 17 |
| API Gateway | Spring Cloud Gateway |
| Database | PostgreSQL 14 |
| Cache | Redis |

### Диаграммы C4

| Уровень | Название | Ключ в workspace.dsl |
|---------|----------|---------------------|
| C1 | System Context | `system-context` |
| C2 | Container | `container-diagram` |
| Dynamic | Создание записи | `dynamic-create-record` |

### Чеклист самопроверки

- [x] Диаграмма C1 показывает всех пользователей и внешние системы
- [x] Диаграмма C2 показывает все контейнеры с технологиями
- [x] Все связи имеют протоколы с портами
- [x] Dynamic диаграмма показывает последовательность сценария
- [x] Нет контейнеров без связей
- [x] У каждого контейнера есть название, описание и технология

### Запуск

1. Установить Java 17+
2. Установить расширение **C4 Architecture As A Code** в VS Code
3. Открыть `workspace.dsl`
4. `Ctrl+Shift+P` → `C4 Architecture As A Code: Focus on Architecture As A Code View`

---

**Автор:** alex  
**Дата:** 2026